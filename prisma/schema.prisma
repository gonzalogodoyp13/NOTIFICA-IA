// Prisma schema for NOTIFICA IA
// This file defines the database structure
// Generator: creates the Prisma Client library
generator client {
  provider = "prisma-client-js"
}

// Datasource: PostgreSQL database on Railway
// DATABASE_URL environment variable contains the connection string
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// User model: represents one "Oficina de Receptor" account
model User {
  id         String   @id @default(cuid()) // Unique ID using CUID
  email      String   @unique // Email address (must be unique)
  officeName String   // Name of the office ("Oficina de Receptor")
  createdAt  DateTime @default(now()) // Auto-set when created

  @@map("users") // Maps to "users" table in database
}

// AuditLog model: records login/logout events per user
model AuditLog {
  id        String   @id @default(cuid()) // Unique ID using CUID
  userEmail String   // Email of the user who performed the action
  action    String   // Action type: "login" or "logout"
  createdAt DateTime @default(now()) // Auto-set when created

  @@map("audit_logs") // Maps to "audit_logs" table in database
  @@index([userEmail]) // Index for faster queries by user email
  @@index([createdAt]) // Index for faster queries by date (descending order)
}

